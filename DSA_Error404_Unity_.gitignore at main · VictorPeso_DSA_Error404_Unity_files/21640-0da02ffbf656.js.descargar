"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[21640],{30558:(e,t,s)=>{s.d(t,{c:()=>L});var a=s(74848),n=s(4817),i=s(98755),o=s(77430),l=s(53419),r=s(29731),c=s(38621),m=s(12683),d=s(34164),u=s(96540),h=s(52940),p=s(25641),g=s(2635),x=s(33592),_=s(55009),j=s(77939),f=s(46665),y=s(59524),C=s(88752),N=s(32744),b=s(82178),v=s(94517),S=s(73010),k=s(11633),T=s(31958),E=s(42983),A=s(82151),R=s(45244);let M=({isLatestMessage:e,isFirstReply:t,isStreaming:s,onClickReference:M,...L})=>{let{message:I}=(0,f.V)(),P=(0,g.Pk)(),B=(0,x.b)(),{author:w,handleConfirmationAction:U,handleRetryErrorMessage:F,hasClientConfirmations:$,isAI:z,isCopilot:Q,isError:W,isAgentError:D,isInterrupted:G,isUser:V,myRef:q,rendererConfig:H,renderFeedback:Y,shouldShowMessageActions:K,skillExecutionToUseForRespondingText:O,showRetryButton:J}=(0,h.p)({excludeFeedback:L.excludeFeedback,inputRef:L.inputRef,isLatestMessage:e,isStreaming:s,excludeReferencesFromFocusZone:!0}),X=I.clientToolResults&&I.clientToolResults.length>0,Z=I.clientSkillsRequests&&I.clientSkillsRequests.length>0,ee=V&&!X,et=s||X||Z,es=et&&e,ea=Q||X,en=(0,u.useMemo)(()=>(0,p.rT)(I.references??[]),[I.references]),ei=(0,u.useMemo)(()=>(0,p.H2)(I.references??[]),[I.references]),eo=(0,u.useMemo)(()=>B.maxMessagesReached(),[B]),el=en.filter(e=>"image"!==e.type&&"org-instructions"!==e.type),er=(0,u.useMemo)(()=>I.mediaContent?.filter(e=>e.mediaType.startsWith("image/")),[I.mediaContent]),ec=(0,u.useMemo)(()=>void 0!==er&&er.length>0,[er]),em=(0,u.useCallback)(e=>{let t=e.target.href,s=en.find(e=>e.url===t);s&&"immersive"===P.mode&&(B.selectReference(s),e.preventDefault())},[B,en,P.mode]),ed=(0,u.useCallback)(e=>{B.setWrapCodeLines(e)},[B]);return(0,a.jsxs)("div",{className:(0,d.$)("message-container",j.A.messageContainer,ee&&j.A.user,z&&j.A.ai),ref:q,...(0,r.G)(`message-${W?"error":s?"streaming":I.id}`),children:[ee&&ec&&(0,a.jsx)("div",{children:er?.map(e=>(0,a.jsx)(_.o,{src:e?.url||"",alt:"Uploaded image",mode:P.mode},e?.url||""))}),ea||X?(0,a.jsx)(b.W,{isLoading:et&&e,isError:W&&I.error?.type!=="agentUnauthorized",mode:P.mode,isFirstMessage:t,isLoadingSkills:(I.skillExecutions??[]).length>0&&et&&""===I.content&&e,message:I.content||"",createdAt:I.createdAt}):z?(0,a.jsx)("div",{className:j.A.avatar,children:(0,a.jsx)(o.r,{src:w.avatarURL,size:24,"aria-label":`${w.name} avatar`,alt:`${w.name} avatar`,"data-testid":"chat-message-author-avatar"})}):null,ee&&(0,a.jsx)(C.t2,{size:"small",className:"mb-2",references:el,message:I,onClickReference:M}),(0,a.jsxs)("div",{className:(0,d.$)(j.A.message,ee&&j.A.user),children:[$&&I.clientConfirmations?.length?(0,a.jsx)(m.az,{className:(0,d.$)("my-1",j.A.clientConfirmationContainer),sx:{justifyContent:ee?"flex-end":""},"data-testid":"chat-message-client-confirmations",children:(0,a.jsxs)("span",{className:j.A.confirmationStatusText,children:[(0,a.jsx)(c.CheckIcon,{})," ",I.clientConfirmations?.[0]?.userLogin||"User"," ",I.clientConfirmations?.[0]?.state," the action"]})}):null,Q&&es&&!I.content&&(0,a.jsx)(R.b,{className:(0,d.$)(j.A.skillExecutionText,"mb-2"),children:`${(0,k.WA)(O)}...`}),(0,a.jsx)("div",{className:(0,d.$)(j.A.messageContent,!!$&&j.A.hasClientConfirmations),children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,d.$)("js-snippet-clipboard-copy-unpositioned",j.A.messageContentWrapper),children:["assistant"===I.role&&I.content&&(en?.length?(0,a.jsx)(C.sV,{className:"mb-2",references:en}):null),"assistant"===I.role&&(ei.length?(0,a.jsx)(y.Q,{mcpToolResults:ei}):null),!$&&(ee?(0,a.jsx)(A.R,{}):I.content&&(0,a.jsx)(n.To,{markdown:I.content,onLinkClick:em,chatMode:"assistive",wrapCodeLines:P.wrapCodeLines,onWrapCodeLinesChange:ed,...H})),W?(0,a.jsx)(v.K,{manager:B}):null,D&&I.agentErrors?.length?(0,a.jsx)(v.h,{errors:I.agentErrors}):null,G?(0,a.jsx)(T.h,{messageHasContent:!!I.content||!!I.skillExecutions?.length}):null,(Q||(0,p.yh)(w))&&(0,p.Ye)(I.confirmations).map((t,s)=>"indexrepo"===t.confirmation.name?null:(0,a.jsx)(N.m,{confirmation:t,handleConfirmation:U,isLatestMessage:e},s))]}),!K&&J&&(0,a.jsx)(E.$,{handleRetryMessage:F,disabled:eo}),K&&(0,a.jsxs)(m.az,{className:(0,d.$)("message-actions",j.A.messageActionsContainer),"data-testid":"message-action-bar",sx:{position:e?void 0:"absolute",bottom:e?void 0:"-2.25rem",borderRadius:e?void 0:2,boxShadow:e?void 0:"var(--shadow-floating-small)",opacity:e?void 0:0,pointerEvents:e?void 0:"none","&::before":{content:e?void 0:'""',position:"absolute"}},children:[Y&&(0,a.jsx)(S.G,{iconSize:"small"}),Q&&!!I.content&&!s&&(0,a.jsx)(i.T,{textToCopy:I.content??"",ariaLabel:"Copy to clipboard",size:"small",className:"d-flex flex-items-center",onCopy:()=>{(0,l.BI)("copilot_chat.activate",{target:"CHAT_MESSAGE_COPY",mode:P.mode})}}),J&&(0,a.jsx)(E.$,{handleRetryMessage:F,disabled:eo})]})]})})]})]})},L=({message:e,...t})=>(0,a.jsx)(f.$,{message:e,children:(0,a.jsx)(M,{...t})});try{M.displayName||(M.displayName="InnerChatMessage")}catch{}try{L.displayName||(L.displayName="ChatMessage")}catch{}},99259:(e,t,s)=>{s.d(t,{r:()=>eg});var a,n=s(74848),i=s(53627),o=s(53419),l=s(88431),r=s(38621),c=s(69726),m=s(21373),d=s(81960),u=s(10095),h=s(12683),p=s(34164),g=s(96540),x=s(87419),_=s(88392),j=s(25641),f=s(73952),y=s(51213),C=s(35247),N=s(2635),b=s(33592),v=s(72303),S=s(46062),k=s(68637),T=s(97315),E=s(70346),A=s(30558),R=s(63262),M=s(7104),L=s(32744),I=s(21728),P=s(5524);let B=e=>{var t;let s,a,i,l=(0,I.c)(10),{suggestionKind:c}=e,m=(0,N.Pk)(),d=(0,b.b)();l[0]!==d||l[1]!==m?(s=e=>{d.sendChatMessage({thread:(0,v.W)(m),content:e.prompt??e.question,intent:e.intent,modeOverride:e.mode,references:m.currentReferences,topic:m.currentTopic,context:m.context}),(0,o.BI)("copilot_generated_suggestion_click",{intent:e.intent,mode:e.mode,contextType:m.context?.[0]?.type,content:e.question})},l[0]=d,l[1]=m,l[2]=s):s=l[2];let h=s;l[3]!==h?(a=(0,g.memo)(function(e){let{suggestion:t}=e;return(0,n.jsxs)(P.l.Item,{onSelect:()=>h(t),className:"CopilotSuggestions-module__suggestionItem--hVOB9",children:[(0,n.jsx)(P.l.LeadingVisual,{children:(0,n.jsx)(u.A,{icon:r.PaperAirplaneIcon})}),(0,n.jsxs)("span",{children:[" ",t.question]})]})}),l[3]=h,l[4]=a):a=l[4];let x=a,_="loading"===m.messagesLoading.state||!!m.streamingMessage,{suggestions:j}=m,f=m.currentReferences[0],y=1===m.currentReferences.length&&f?.type==="repository"&&f.id===m.currentRepository?.id,C=!!(!_&&y);return l[5]!==x||l[6]!==C||l[7]!==c||l[8]!==j?(i=C&&j&&j.suggestions?(0,n.jsxs)(P.l,{className:(0,p.$)("copilot-suggestions","CopilotSuggestions-module__suggestionsList--vzbN1"),children:["initial"===c&&(0,n.jsx)(P.l.Heading,{as:"h2",className:"CopilotSuggestions-module__suggestionListHeading--W7rpU",children:(t=j.referenceType)?`Ask about the ${t.replace(/-/g," ")}:`:"Ask anything:"}),j?.suggestions.map(e=>(0,n.jsx)(x,{suggestion:e},e.question))]}):null,l[5]=x,l[6]=C,l[7]=c,l[8]=j,l[9]=i):i=l[9],i},w=(0,g.memo)(B);try{B.displayName||(B.displayName="CopilotSuggestions")}catch{}try{(a=CopilotSuggestion).displayName||(a.displayName="CopilotSuggestion")}catch{}var U=s(93412),F=s(35673),$=s(79184),z=s(74753),Q=s(73077),W=s(26108);function D(e){let t,s,a,i,o,l,c,m=(0,I.c)(16),{icon:d,content:u,actions:h,onDismiss:p}=e,x=(0,g.useRef)(null),[_,j]=(0,g.useState)(!1);m[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{let e=x.current;if(!e)return;let t=new ResizeObserver(t=>{for(let s of t)s.target===e&&(s.contentRect.height>40?j(!0):j(!1))});return t.observe(e),()=>{t.disconnect()}},s=[],m[0]=t,m[1]=s):(t=m[0],s=m[1]),(0,g.useEffect)(t,s);let f=`CustomBanner-module__container--QLdBn ${_?"CustomBanner-module__expanded--NUbF0":""}`;return m[2]!==d?(a=(0,n.jsx)("div",{className:"CustomBanner-module__icon--_7NPB",children:d}),m[2]=d,m[3]=a):a=m[3],m[4]!==u?(i=(0,n.jsx)("div",{className:"CustomBanner-module__content--szVMr",children:u}),m[4]=u,m[5]=i):i=m[5],m[6]!==p?(o=p&&(0,n.jsx)(W.K,{className:"CustomBanner-module__iconButton--BUeu0",variant:"invisible",icon:r.XIcon,size:"medium","aria-label":"Close",onClick:p}),m[6]=p,m[7]=o):o=m[7],m[8]!==h||m[9]!==o?(l=(0,n.jsxs)("div",{className:"CustomBanner-module__actions--zeIqy",children:[h,o]}),m[8]=h,m[9]=o,m[10]=l):l=m[10],m[11]!==f||m[12]!==a||m[13]!==i||m[14]!==l?(c=(0,n.jsxs)("div",{ref:x,className:f,children:[a,i,l]}),m[11]=f,m[12]=a,m[13]=i,m[14]=l,m[15]=c):c=m[15],c}try{D.displayName||(D.displayName="CustomBanner")}catch{}function G(){let e,t,s,a,i,o=(0,I.c)(7),{resetDate:l}=(0,$.xR)();o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(r.InfoIcon,{}),o[0]=e):e=o[0];let c=e;o[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(z.s,{children:(0,n.jsx)("h2",{children:"Usage limit reached"})}),o[1]=t):t=o[1],o[2]!==l?(s=(0,n.jsxs)(n.Fragment,{children:[t,"You have reached your free plan limit. It will reset on ",l]}),o[2]=l,o[3]=s):s=o[3];let m=s;o[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)(Q.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:V,children:"Upgrade"}),o[4]=a):a=o[4];let d=a;return o[5]!==m?(i=(0,n.jsx)(D,{icon:c,content:m,actions:d}),o[5]=m,o[6]=i):i=o[6],i}function V(){(0,o.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_BANNER_LINK_UPGRADE",mode:"assistive"})}try{G.displayName||(G.displayName="QuotaExceededBanner")}catch{}var q=s(74807),H=s(84268);function Y(){let e,t,s,a,i,o,l,r,c,m,d,u,h=(0,I.c)(19),{resetDate:p}=(0,$.xR)(),[x,_]=(0,g.useState)(!1),[j,f]=(0,g.useState)(!1);h[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{_(!0),f(!0)},h[0]=e):e=h[0];let y=e;h[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{_(!1)},h[1]=t):t=h[1];let C=t;h[2]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{f(!1)},h[2]=s):s=h[2];let N=s,b=x||j;return h[3]!==x||h[4]!==b?(a=b?(0,n.jsx)(q.N,{animationType:"jumpWiggle",loopAnimation:x,size:80,onAnimationEnd:N}):(0,n.jsx)(q.N,{animationType:"static",loopAnimation:!1,size:80}),h[3]=x,h[4]=b,h[5]=a):a=h[5],h[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)("h2",{className:"QuotaExceededEmptyState-module__heading--jMYRX",children:"You\u2019ve reached your free plan limit"}),h[6]=i):i=h[6],h[7]!==p?(o=(0,n.jsxs)("p",{className:"QuotaExceededEmptyState-module__description--SvMpU",children:["Your limits will reset on ",p,"."]}),h[7]=p,h[8]=o):o=h[8],h[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)(Q.z,{as:"a",variant:"primary",href:"https://github.com/github-copilot/pro",onMouseEnter:y,onMouseLeave:C,onClick:K,children:"Upgrade"}),h[9]=l):l=h[9],h[10]!==o?(r=(0,n.jsxs)("div",{className:"QuotaExceededEmptyState-module__copy--Ul81N",children:[i,o,l]}),h[10]=o,h[11]=r):r=h[11],h[12]!==a||h[13]!==r?(c=(0,n.jsxs)("div",{className:"QuotaExceededEmptyState-module__main--rwRZl",children:[a,r]}),h[12]=a,h[13]=r,h[14]=c):c=h[14],h[15]===Symbol.for("react.memo_cache_sentinel")?(m=(0,n.jsx)("strong",{children:"Part of an organization?"}),h[15]=m):m=h[15],h[16]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsxs)("div",{className:"QuotaExceededEmptyState-module__footer--lM9PT",children:[m,(0,n.jsxs)("span",{children:["Upgrade to"," ",(0,n.jsx)(H.A,{href:"https://github.com/github-copilot/business_signup/choose_business_type?cft=copilot_li.features_copilot.cfb",inline:!0,children:"Copilot Business"})," ","to enable across teams."]})]}),h[16]=d):d=h[16],h[17]!==c?(u=(0,n.jsxs)("div",{className:"QuotaExceededEmptyState-module__container--UBt9E",children:[c,d]}),h[17]=c,h[18]=u):u=h[18],u}function K(){(0,o.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_EMPTY_STATE_LINK_UPGRADE",mode:"assistive"})}try{Y.displayName||(Y.displayName="QuotaExceededEmptyState")}catch{}var O=s(79064);function J(){let e,t,s,a,i,o,l,c=(0,I.c)(9),{isLicensedLimited:m,chatQuotaRemaining:d}=(0,$.xR)(),[u,h]=(0,g.useState)(Z);c[0]!==d||c[1]!==m?(e=()=>{if(m&&void 0!==d){let e=O.Jt.getMeterBannerFlag();d>0&&d<=10?null===e?(O.Jt.setMeterBannerFlag(!0),h(!0)):h(e):(O.Jt.removeMeterBannerFlag(),h(!1))}},t=[m,d],c[0]=d,c[1]=m,c[2]=e,c[3]=t):(e=c[2],t=c[3]),(0,g.useEffect)(e,t),c[4]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{O.Jt.setMeterBannerFlag(!1),h(!1)},c[4]=s):s=c[4];let p=s;if(!u||void 0===d)return null;c[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)(r.InfoIcon,{}),c[5]=a):a=c[5];let x=a;c[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(z.s,{children:(0,n.jsx)("h2",{children:"Usage limit approaching"})}),"You only have a few free responses remaining."]}),c[6]=i):i=c[6];let _=i;c[7]===Symbol.for("react.memo_cache_sentinel")?(o=(0,n.jsx)(Q.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:X,children:"Upgrade"}),c[7]=o):o=c[7];let j=o;return c[8]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)("div",{className:"QuotaMeterBanner-module__container--BWRlc",children:(0,n.jsx)(D,{icon:x,content:_,actions:j,onDismiss:p})}),c[8]=l):l=c[8],l}function X(){(0,o.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"assistive"})}function Z(){return O.Jt.getMeterBannerFlag()??!1}try{J.displayName||(J.displayName="QuotaMeterBanner")}catch{}var ee=s(92130);function et(e){let t,s,a,i=(0,I.c)(4),{mode:o}=e;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)("div",{className:"ChatWithCopilotHeader-module__iconContainer--XyD0H",children:(0,n.jsx)(ee.A,{})}),s=(0,n.jsx)(d.A,{as:"h1",className:"ChatWithCopilotHeader-module__headerTitle--ovUdi",children:"Ask Copilot"}),i[0]=t,i[1]=s):(t=i[0],s=i[1]);let l="immersive"===o?5:3;return i[2]!==l?(a=(0,n.jsxs)(n.Fragment,{children:[t,s,(0,n.jsx)(h.EY,{as:"p",sx:{mb:l},className:"ChatWithCopilotHeader-module__descriptionText--bb_1f",children:"Select a repository to get started. Ask questions about your codebase to get answers fast and learn your way around."})]}),i[2]=l,i[3]=a):a=i[3],a}try{et.displayName||(et.displayName="ChatWithCopilotHeader")}catch{}var es=s(70170),ea=s(99511),en=s(26408),ei=s(26239),eo=s(27844);let el="TopicList-module__mutedLeadingVisual--zyTv5";function er(){let e,t,s,a,o,l,m,d,u,h,p,x=(0,I.c)(23),_=(0,b.b)(),{mode:j,selectedThreadID:f}=(0,N.Pk)(),[y,C]=(0,g.useState)("");x[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,es.s)(e=>C(e),400,{start:!1}),x[0]=e):e=x[0];let v=e,{repositories:S,loading:k,resetTopRepoResults:T}=(0,en.U)(y,!0,4);x[1]!==_||x[2]!==j||x[3]!==T||x[4]!==f?(t=async e=>{if(T(),void 0===e){_.showTopicPicker(!1),_.clearCurrentTopic(),_.clearCurrentReferences(),"immersive"===j&&(0,i.kd)("/copilot"),f&&O.Jt.setSelectedTopic(f,null);return}await _.fetchCurrentRepo(Number(e)),_.showTopicPicker(!1)},x[1]=_,x[2]=j,x[3]=T,x[4]=f,x[5]=t):t=x[5];let E=t;e:{if(k){s="Loading repositories";break e}if(0===S.length){s="No repositories found";break e}if(1===S.length){s="1 repository found";break e}s=`${S.length} repositories found`}let A=s;return x[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)("div",{className:"TopicList-module__searchInputContainer--MpQGB",children:(0,n.jsx)(ea.A,{id:ei.uN,leadingVisual:r.SearchIcon,name:"topic-search","aria-label":"Search repositories to chat about",placeholder:"Search repositories to chat about",onChange:e=>v(e.target.value),className:"TopicList-module__TextInput--tm_7r"})}),x[6]=a):a=x[6],x[7]!==A?(o=(0,n.jsx)("div",{role:"status",className:"sr-only",children:A}),x[7]=A,x[8]=o):o=x[8],x[9]!==E||x[10]!==k||x[11]!==S?(l=k?(0,n.jsx)("li",{className:"TopicList-module__loadingContainer--gQUvo",children:(0,n.jsx)(c.A,{})}):0===S.length?(0,n.jsxs)(P.l.Item,{disabled:!0,children:[(0,n.jsx)(P.l.LeadingVisual,{className:el,children:(0,n.jsx)(r.CircleSlashIcon,{})}),(0,n.jsx)("span",{className:el,children:"No results found"})]}):(0,n.jsx)(n.Fragment,{children:S.length>0&&(0,n.jsxs)(P.l.Group,{children:[(0,n.jsx)(P.l.GroupHeading,{as:"h3",children:"Recent repositories"}),S.map(e=>(0,n.jsx)(eo.W,{repo:e,onSelect:E,trailingVisualComponent:(0,n.jsx)(r.ArrowRightIcon,{})},e.nwo))]})}),x[9]=E,x[10]=k,x[11]=S,x[12]=l):l=x[12],x[13]===Symbol.for("react.memo_cache_sentinel")?(m=(0,n.jsx)(P.l.Divider,{className:"TopicList-module__ActionList_Divider--tKVd_"}),x[13]=m):m=x[13],x[14]!==E?(d=()=>E(void 0),x[14]=E,x[15]=d):d=x[15],x[16]===Symbol.for("react.memo_cache_sentinel")?(u=(0,n.jsx)(P.l.TrailingVisual,{children:(0,n.jsx)(r.ArrowRightIcon,{})}),x[16]=u):u=x[16],x[17]!==d?(h=(0,n.jsxs)(P.l.Item,{id:"chat-with-no-context",onSelect:d,className:"TopicList-module__generalPurposeItem--UKLE6",children:["General purpose chat",u]},"chat-with-no-context"),x[17]=d,x[18]=h):h=x[18],x[19]!==o||x[20]!==l||x[21]!==h?(p=(0,n.jsxs)("div",{className:"TopicList-module__TopicListContainer--q95Ja",children:[a,(0,n.jsxs)(P.l,{children:[o,l,m,h]})]}),x[19]=o,x[20]=l,x[21]=h,x[22]=p):p=x[22],p}try{er.displayName||(er.displayName="TopicList")}catch{}let ec=()=>{let e,t,s,a=(0,I.c)(5),i=(0,N.Pk)();return a[0]!==i.mode?(e=(0,n.jsx)(et,{mode:i.mode}),a[0]=i.mode,a[1]=e):e=a[1],a[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)("div",{className:"TopicPicker-module__topicListContainer--q3K2a",children:(0,n.jsx)(er,{})}),a[2]=t):t=a[2],a[3]!==e?(s=(0,n.jsx)("div",{className:"TopicPicker-module__TopicPickerContainer--jqRrB",children:(0,n.jsxs)("div",{className:"TopicPicker-module__mainContentContainer--EAEDK",children:[e,t]})}),a[3]=e,a[4]=s):s=a[4],s};try{ec.displayName||(ec.displayName="TopicPicker")}catch{}let em=({disableTopicPicker:e,inputRef:t,showQuotaExceededEmptyState:s})=>{let a=(0,N.Pk)(),{isWaitingOnCopilot:i,showTopicPicker:o,streamingMessage:r}=a,{scrollToBottom:c}=(0,M.b)(),{messages:m,groupedMessages:d}=(0,_.a)(a);return(0,l.N)(()=>c("instant"),[c]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"sr-only",children:"Copilot Chat"}),s?(0,n.jsx)(Y,{}):o&&!e?(0,n.jsx)(ec,{}):(0,n.jsx)("div",{className:"Chat-module__ChatMainContainer--r_Lbb",children:(0,n.jsxs)("div",{className:(0,p.$)("copilot-messages-container","Chat-module__messagesContainer--pUaGC"),children:[0===m.length&&(0,n.jsx)("p",{className:"Chat-module__legalText--nFibb",children:(0,n.jsx)(U.h,{})}),d.map((e,s)=>(0,n.jsx)(R.i,{isLastGroup:s===d.length-1,children:e.map((o,l)=>{let c=s===d.length-1&&l===e.length-1;return(o===r||o.id===y.Wp||!ed(o)||!C.W.dotcomChatClientSideSkills||o.error||eu(o,c,a))&&(0,n.jsx)(A.c,{isLatestMessage:c,isFirstReply:1===m.length,isStreaming:o.id===r?.id||c&&i,message:o,inputRef:t},l)})},s)),a.clientSkillConfirmation&&C.W.dotcomChatClientSideSkills&&(0,n.jsx)("div",{className:"m-3",children:(0,n.jsx)(L.m,{confirmation:a.clientSkillConfirmation,handleConfirmation:e=>a.clientSkillConfirmation?.onSubmit?.("accepted"===e.state),isLatestMessage:!0})})]})})]})},ed=e=>!e.content&&(!e.confirmations||0===e.confirmations.length)&&(!e.clientConfirmations||0===e.clientConfirmations.length),eu=(e,t,s)=>(e.clientSkillsRequests&&e.clientSkillsRequests.length>0||e.clientToolResults&&e.clientToolResults.length>0)&&t&&!s.streamingMessage&&!s.clientSkillConfirmation,eh=()=>(0,n.jsxs)("div",{className:"Chat-module__loadingStateContainer--jXyyu",children:[(0,n.jsx)(c.A,{size:"large"}),(0,n.jsx)("div",{className:"Chat-module__loadingText--XRJo1",children:"Loading conversation\u2026"})]}),ep=()=>{let{mode:e,reviewLab:t}=(0,N.Pk)();return(0,n.jsxs)(h.az,{sx:{pl:"immersive"===e?3:2},className:"Chat-module__errorContainer--Ci2Ci",children:[(0,n.jsx)(u.A,{icon:r.AlertIcon}),"Failed to load previous messages.",t&&(0,n.jsx)(n.Fragment,{children:"\xa0You are in a review lab. Please check that you are connected to the Developer VPN."})]})},eg=({inputRef:e})=>{let t=(0,N.Pk)(),s=(0,b.b)(),{currentReferences:a,messagesLoading:l,messagesRestored:c,threadsLoading:m,currentTopic:d,messages:u,mode:h,selectedThreadID:_,showTopicPicker:C,context:A}=t,R=(0,v.W)(t),L=(0,g.useMemo)(()=>(0,j.k4)(Object.keys(k.Pe)).slice(0,4).map(e=>({heading:e,content:(0,j.k4)(k.Pe[e])[0]})),[]),{textAreaRef:I}=(0,x.Y)(e),{chatQuotaExceeded:P,isLicensedLimited:B,reloadQuota:U}=(0,$.xR)(),{ambientError:z}=(0,N.Pk)(),Q=(0,S.GF)(t.availableModels);(0,g.useEffect)(()=>{if(!_||"assistive"===h)return;let e=`${j.Jz}/c/${_}`;window.location.pathname!==e&&0!==u.length&&(0,i.kd)(e)},[_,h,u.length]);let W=(0,g.useCallback)(async(e,n)=>{if(""===e.trim())return;U("user_submit");let i=[...a,...n||[]];await s.sendChatMessage({thread:R,content:e,references:i,topic:d,context:A,customInstructions:t.customInstructions,skillOptions:t.skillOptions,model:Q})},[U,s,R,a,d,A,t.customInstructions,t.skillOptions,Q]),D=c&&u.length>0,V="loading"===l.state&&t.selectedThreadID&&!C&&!D,q="error"===l.state||"error"===m.state,H="loaded"===l.state||D,Y=P&&(C||!R),K=(0,f.B)(u),O=!!(!V&&!t.currentTopic&&!C&&0===K.length&&0===a.length);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(M.$,{className:"copilot-chat-messages",style:{flex:"1 1 auto"},children:[V&&(0,n.jsx)(eh,{}),q&&(0,n.jsx)(ep,{}),H&&!V&&(0,n.jsx)(em,{inputRef:I,showQuotaExceededEmptyState:Y}),(0,n.jsx)(F.Cb,{})]}),O&&(0,n.jsx)("div",{className:(0,p.$)("copilot-chat-messages","Chat-module__suggestedPromptsGrid--DPria"),children:L.map((e,a)=>(0,n.jsx)(ex,{heading:e.heading,content:e.content,onSubmit:()=>{s.sendChatMessage({thread:(0,v.W)(t),content:e.content,references:t.currentReferences,topic:t.currentTopic,context:t.context}),(0,o.BI)("copilot_chat_suggestion_click",{topic:t.currentTopic?.name})}},a))}),!V&&!C&&!Y&&(0,n.jsx)("div",{className:(0,p.$)("copilot-chat-input copilot-chat-input-outer","Chat-module__chatInputContainer--yKT4X"),children:P?(0,n.jsx)(G,{}):(0,n.jsxs)(n.Fragment,{children:[!O&&0===K.length&&!t.showTopicPicker&&(0,n.jsx)(w,{suggestionKind:"initial"}),(0,n.jsxs)("div",{children:[B&&(0,n.jsx)(J,{}),z&&(0,n.jsx)(T.P,{ambientError:z}),(0,n.jsx)(E.V,{modes:[{name:y.II.Ask,supportsMCP:!0,supportsAttachments:!0,supportsModelSwitching:!0,supportsSpaces:!0,supportsAutocompletion:!0,icon:r.CommentIcon}],textAreaRef:I,onSubmit:W,isStreaming:!!t.streamingMessage,size:"small"},_)]})]})})]})})};function ex({heading:e,content:t,onSubmit:s}){return(0,n.jsxs)(m.Q,{onClick:s,className:"Chat-module__suggestedPromptButton--VrQUl",children:[(0,n.jsx)(d.A,{as:"h3",className:"Chat-module__promptHeading--CccY2",children:e}),(0,n.jsx)("p",{className:"Chat-module__promptDescription--gkjS8",children:t})]})}try{em.displayName||(em.displayName="Messages")}catch{}try{eh.displayName||(eh.displayName="Loading")}catch{}try{ep.displayName||(ep.displayName="Error")}catch{}try{eg.displayName||(eg.displayName="Chat")}catch{}try{ex.displayName||(ex.displayName="SuggestedPrompt")}catch{}}}]);
//# sourceMappingURL=21640-ce96b2816181.js.map